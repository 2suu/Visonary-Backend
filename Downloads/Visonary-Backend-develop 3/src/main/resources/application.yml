spring:
  application:
    name: visionary

  # 기본 활성 프로필
  profiles:
    default: local

  jackson:
    serialization:
      WRITE_DATES_AS_TIMESTAMPS: false
    time-zone: Asia/Seoul

  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher

  jpa:
    open-in-view: false
    hibernate:
      ddl-auto: validate   # 스키마는 Flyway로 관리, JPA는 검증만
    properties:
      hibernate:
        format_sql: true
        jdbc.time_zone: Asia/Seoul

  flyway:
    enabled: true
    locations: classpath:db/migration

server:
  port: 8080

management:           # Actuator
  endpoints:
    web:
      exposure:
        include: health,info,metrics,env,loggers,threaddump,httpexchanges
  endpoint:
    health:
      show-details: when_authorized

jwt:
  issuer: "visionary"
  access-token-expiration-ms: 1800000     # 30분
  refresh-token-expiration-ms: 604800000  # 7일
  access-token-header: "Authorization"
  refresh-token-cookie: "Refresh-Token"
  # 운영/로컬 공통 키: 환경변수 우선
  secret: "${JWT_SECRET:}"

firebase:
  # 권장: GOOGLE_APPLICATION_CREDENTIALS 환경변수 사용
  use-google-default-credentials: true
  # 필요 시 경로로 주입 (예: file:/etc/secret/firebase.json)
  service-account-json-path: "${FIREBASE_CREDENTIALS_PATH:}"

logging:
  level:
    org.hibernate.SQL: info
    org.hibernate.orm.jdbc.bind: info  # 개발 중 파라미터 로깅
